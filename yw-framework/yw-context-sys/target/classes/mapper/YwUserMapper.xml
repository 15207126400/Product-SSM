<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunwei.context.sys.usercenter.dao.YwUserDao">

    <!-- 过滤查询结果(主要用于联合查询) -->
    <resultMap type="com.yunwei.context.sys.usercenter.model.YwUser" id="resultMap">
         <id column="user_id" property="user_id" />
         <result column="user_type" property="user_type" />  
         <result column="user_name" property="user_name" />  
         <result column="user_avg" property="user_avg" />  
         <result column="phone_tel" property="phone_tel" />  
         <result column="id_no" property="id_no" />  
         <result column="password" property="password" />  
         <result column="secret_key" property="secret_key" />  
         <result column="bind_mac" property="bind_mac" />  
         <result column="bind_ip" property="bind_ip" />  
         <result column="user_status" property="user_status" />  
         <result column="login_errors" property="login_errors" />  
         <result column="password_question" property="password_question" />  
         <result column="password_answer" property="password_answer" />  
         <result column="user_level" property="user_level" />  
         <result column="create_datetime" property="create_datetime" />  
         <result column="update_datetime" property="update_datetime" />  
         <result column="pay_datetime" property="pay_datetime" />  
         <result column="expire_datetime" property="expire_datetime" /> 
         
    </resultMap>
    
    <sql id="sql">
         user_id,
         user_type,
         user_name,
         user_avg,
         phone_tel,
         id_no,
         password,
         secret_key,
         bind_mac,
         bind_ip,
         user_status,
         login_errors,
         password_question,
         password_answer,
         user_level,
         create_datetime,
         update_datetime,
         pay_datetime,
         expire_datetime
    </sql>
    
    <sql id="insertSql">
         user_type,
         user_name,
         user_avg,
         phone_tel,
         id_no,
         password,
         secret_key,
         bind_mac,
         bind_ip,
         user_status,
         login_errors,
         password_question,
         password_answer,
         user_level,
         create_datetime,
         update_datetime,
         pay_datetime,
         expire_datetime
    </sql>
    
    <sql id="unionSql">
         u.user_id,
         u.user_type,
         u.user_name,
         u.user_avg,
         u.phone_tel,
         u.id_no,
         u.password,
         u.secret_key,
         u.bind_mac,
         u.bind_ip,
         u.user_status,
         u.login_errors,
         u.password_question,
         u.password_answer,
         u.user_level,
         u.create_datetime,
         u.update_datetime,
         u.pay_datetime,
         u.expire_datetime
    </sql>
    
    <!-- 当前表条件 -->
    <sql id = "whereSql">
	   <where>
            <if test="user_id != null and user_id != '' ">
	          and user_id = #{user_id}
	        </if>
            <if test="user_type != null and user_type != '' ">
	          and user_type = #{user_type}
	        </if>
            <if test="user_name != null and user_name != '' ">
	          and user_name = #{user_name}
	        </if>
	        <if test="user_avg != null and user_avg != '' ">
	          and user_avg = #{user_avg}
	        </if>
            <if test="phone_tel != null and phone_tel != '' ">
	          and phone_tel = #{phone_tel}
	        </if>
            <if test="id_no != null and id_no != '' ">
	          and id_no = #{id_no}
	        </if>
            <if test="password != null and password != '' ">
	          and password = #{password}
	        </if>
            <if test="secret_key != null and secret_key != '' ">
	          and secret_key = #{secret_key}
	        </if>
            <if test="bind_mac != null and bind_mac != '' ">
	          and bind_mac = #{bind_mac}
	        </if>
            <if test="bind_ip != null and bind_ip != '' ">
	          and bind_ip = #{bind_ip}
	        </if>
            <if test="user_status != null and user_status != '' ">
	          and user_status = #{user_status}
	        </if>
            <if test="login_errors != null and login_errors != '' ">
	          and login_errors = #{login_errors}
	        </if>
            <if test="password_question != null and password_question != '' ">
	          and password_question = #{password_question}
	        </if>
            <if test="password_answer != null and password_answer != '' ">
	          and password_answer = #{password_answer}
	        </if>
            <if test="user_level != null and user_level != '' ">
	          and user_level = #{user_level}
	        </if>
            <if test="create_datetime != null and create_datetime != '' ">
	          and create_datetime = #{create_datetime}
	        </if>
            <if test="update_datetime != null and update_datetime != '' ">
	          and update_datetime = #{update_datetime}
	        </if>
            <if test="pay_datetime != null and pay_datetime != '' ">
	          and pay_datetime = #{pay_datetime}
	        </if>
            <if test="expire_datetime != null and expire_datetime != '' ">
	          and expire_datetime = #{expire_datetime}
	        </if>
	    </where> 
    </sql>
    
    <!-- 当前表(或不存在当前表)条件(Map参数) -->
    <sql id = "whereMapSql">
	   <where>
            <if test="user_id != null and user_id != '' ">
	          and u.user_id = #{user_id}
	        </if>
            <if test="user_type != null and user_type != '' ">
	          and u.user_type = #{user_type}
	        </if>
            <if test="user_name != null and user_name != '' ">
	          and u.user_name = #{user_name}
	        </if>
	        <if test="user_avg != null and user_avg != '' ">
	          and u.user_avg = #{user_avg}
	        </if>
            <if test="phone_tel != null and phone_tel != '' ">
	          and u.phone_tel = #{phone_tel}
	        </if>
            <if test="id_no != null and id_no != '' ">
	          and u.id_no = #{id_no}
	        </if>
            <if test="password != null and password != '' ">
	          and u.password = #{password}
	        </if>
            <if test="secret_key != null and secret_key != '' ">
	          and u.secret_key = #{secret_key}
	        </if>
            <if test="bind_mac != null and bind_mac != '' ">
	          and u.bind_mac = #{bind_mac}
	        </if>
            <if test="bind_ip != null and bind_ip != '' ">
	          and u.bind_ip = #{bind_ip}
	        </if>
            <if test="user_status != null and user_status != '' ">
	          and u.user_status = #{user_status}
	        </if>
            <if test="login_errors != null and login_errors != '' ">
	          and u.login_errors = #{login_errors}
	        </if>
            <if test="password_question != null and password_question != '' ">
	          and u.password_question = #{password_question}
	        </if>
            <if test="password_answer != null and password_answer != '' ">
	          and u.password_answer = #{password_answer}
	        </if>
            <if test="user_level != null and user_level != '' ">
	          and u.user_level = #{user_level}
	        </if>
            <if test="create_datetime != null and create_datetime != '' ">
	          and u.create_datetime = #{create_datetime}
	        </if>
            <if test="update_datetime != null and update_datetime != '' ">
	          and u.update_datetime = #{update_datetime}
	        </if>
            <if test="pay_datetime != null and pay_datetime != '' ">
	          and u.pay_datetime = #{pay_datetime}
	        </if>
            <if test="expire_datetime != null and expire_datetime != '' ">
	          and u.expire_datetime = #{expire_datetime}
	        </if>
	    </where> 
    </sql>
    
    <!-- 当前表联合查询条件(Map参数) -->
    <sql id = "whereUnionSql">
	   <where>
            <if test="user_id != null and user_id != '' ">
	          and u.user_id = #{user_id}
	        </if>
            <if test="user_type != null and user_type != '' ">
	          and u.user_type = #{user_type}
	        </if>
            <if test="user_name != null and user_name != '' ">
	          and u.user_name = #{user_name}
	        </if>
	        <if test="user_avg != null and user_avg != '' ">
	          and u.user_avg = #{user_avg}
	        </if>
            <if test="phone_tel != null and phone_tel != '' ">
	          and u.phone_tel = #{phone_tel}
	        </if>
            <if test="id_no != null and id_no != '' ">
	          and u.id_no = #{id_no}
	        </if>
            <if test="password != null and password != '' ">
	          and u.password = #{password}
	        </if>
            <if test="secret_key != null and secret_key != '' ">
	          and u.secret_key = #{secret_key}
	        </if>
            <if test="bind_mac != null and bind_mac != '' ">
	          and u.bind_mac = #{bind_mac}
	        </if>
            <if test="bind_ip != null and bind_ip != '' ">
	          and u.bind_ip = #{bind_ip}
	        </if>
            <if test="user_status != null and user_status != '' ">
	          and u.user_status = #{user_status}
	        </if>
            <if test="login_errors != null and login_errors != '' ">
	          and u.login_errors = #{login_errors}
	        </if>
            <if test="password_question != null and password_question != '' ">
	          and u.password_question = #{password_question}
	        </if>
            <if test="password_answer != null and password_answer != '' ">
	          and u.password_answer = #{password_answer}
	        </if>
            <if test="user_level != null and user_level != '' ">
	          and u.user_level = #{user_level}
	        </if>
            <if test="create_datetime != null and create_datetime != '' ">
	          and u.create_datetime = #{create_datetime}
	        </if>
            <if test="update_datetime != null and update_datetime != '' ">
	          and u.update_datetime = #{update_datetime}
	        </if>
            <if test="pay_datetime != null and pay_datetime != '' ">
	          and u.pay_datetime = #{pay_datetime}
	        </if>
            <if test="expire_datetime != null and expire_datetime != '' ">
	          and u.expire_datetime = #{expire_datetime}
	        </if>
	    </where> 
    </sql>
    
    <!-- 当前表批量删除条件 -->
    <sql id="whereBatchSql">
		<where>
			<if test="user_id != null and user_id != '' ">
				and user_id in
				<foreach collection="user_id" item="id" separator="," open="("
					close=")">
					#{id}
				</foreach>
			</if>
		</where>
	</sql>
	
	<!-- 分页sql条件 -->
	<sql id="pageSql">
       <if test="begin == 0 || begin > 0">
             limit #{begin},#{end}
        </if>
    </sql>

	<!-- 当前表添加-->
	<insert id="insert" parameterType="com.yunwei.context.sys.usercenter.model.YwUser">
		insert into yw_system_usercenter.yw_user(<include refid="sql"/>) 
		values(
		         #{user_id},
	             #{user_type},
	             #{user_name},
	             #{user_avg},
	             #{phone_tel},
	             #{id_no},
	             #{password},
	             #{secret_key},
	             #{bind_mac},
	             #{bind_ip},
	             #{user_status},
	             #{login_errors},
	             #{password_question},
	             #{password_answer},
	             #{user_level},
	             #{create_datetime},
	             #{update_datetime},
	             #{pay_datetime},
	             #{expire_datetime}
		     )
	</insert>
	
	<!-- 当前表批量添加 -->
	<insert id="insertBatch" parameterType="java.util.List">
        insert into yw_system_usercenter.yw_user(<include refid="sql"/>)
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (
                 #{item.user_id},
	             #{item.user_type},
	             #{item.user_name},
	             #{item.user_avg},
	             #{item.phone_tel},
	             #{item.id_no},
	             #{item.password},
	             #{item.secret_key},
	             #{item.bind_mac},
	             #{item.bind_ip},
	             #{item.user_status},
	             #{item.login_errors},
	             #{item.password_question},
	             #{item.password_answer},
	             #{item.user_level},
	             #{item.create_datetime},
	             #{item.update_datetime},
	             #{item.pay_datetime},
	             #{item.expire_datetime}
	       )
        </foreach>
    </insert>
    
	<!-- 当前表查询 -->
	<select id="queryList" parameterType="java.util.Map" resultType="com.yunwei.context.sys.usercenter.model.YwUser">
		select <include refid="sql"/> from yw_system_usercenter.yw_user
		<include refid="whereSql"/>
	</select>
	
	<!-- 当前表联合查询(或分页联合查询)(Map参数)(1、子表关联查询，2、不同类型表关联查询) -->
	<select id="queryUnionList" parameterType="java.util.Map" resultMap="resultMap">
		select <include refid="unionSql"/> from yw_system_usercenter.yw_user as u
		<include refid="whereUnionSql"/>
		<!-- 分页查询，通过begin条件区别 -->
		<include refid="pageSql"/>
	</select>
	
	<!-- 当前表分页查询(Map参数) -->
	<select id="queryListPage" parameterType="java.util.Map" resultType="com.yunwei.context.sys.usercenter.model.YwUser">
		select <include refid="sql"/> from yw_system_usercenter.yw_user
		<include refid="whereSql"/>
		order by user_id desc
		limit #{begin},#{end}
	</select>
	
	<!-- 当前表查询总条数 -->
	<select id="queryTotals" parameterType="java.util.Map" resultType="int">
		select count(1) from yw_system_usercenter.yw_user
		<include refid="whereSql"/>
	</select>
	
	<!-- 当前表更新 -->
	<update id="update" parameterType="java.util.Map">
	    update yw_system_usercenter.yw_user
	     <trim prefix="set" suffixOverrides=",">
            <if test="user_type != null and user_type != '' ">
	           user_type = #{user_type},
	        </if>
            <if test="user_name != null and user_name != '' ">
	           user_name = #{user_name},
	        </if>
	        <if test="user_avg != null and user_avg != '' ">
	           user_avg = #{user_avg},
	        </if>
            <if test="phone_tel != null and phone_tel != '' ">
	           phone_tel = #{phone_tel},
	        </if>
            <if test="id_no != null and id_no != '' ">
	           id_no = #{id_no},
	        </if>
            <if test="password != null and password != '' ">
	           password = #{password},
	        </if>
            <if test="secret_key != null and secret_key != '' ">
	           secret_key = #{secret_key},
	        </if>
            <if test="bind_mac != null and bind_mac != '' ">
	           bind_mac = #{bind_mac},
	        </if>
            <if test="bind_ip != null and bind_ip != '' ">
	           bind_ip = #{bind_ip},
	        </if>
            <if test="user_status != null and user_status != '' ">
	           user_status = #{user_status},
	        </if>
            <if test="login_errors != null and login_errors != '' ">
	           login_errors = #{login_errors},
	        </if>
            <if test="password_question != null and password_question != '' ">
	           password_question = #{password_question},
	        </if>
            <if test="password_answer != null and password_answer != '' ">
	           password_answer = #{password_answer},
	        </if>
            <if test="user_level != null and user_level != '' ">
	           user_level = #{user_level},
	        </if>
            <if test="create_datetime != null and create_datetime != '' ">
	           create_datetime = #{create_datetime},
	        </if>
            <if test="update_datetime != null and update_datetime != '' ">
	           update_datetime = #{update_datetime},
	        </if>
            <if test="pay_datetime != null and pay_datetime != '' ">
	           pay_datetime = #{pay_datetime},
	        </if>
            <if test="expire_datetime != null and expire_datetime != '' ">
	           expire_datetime = #{expire_datetime},
	        </if>
	    </trim>
	    <where>
             <if test="user_id != null and user_id != '' ">
	           and user_id = #{user_id}
	         </if>
	    </where>
	</update>
	
	<!-- 当前表删除 -->
	<delete id="delete" parameterType="java.util.Map">
	    delete from yw_system_usercenter.yw_user
	    <where>
            <if test="user_id != null and user_id != '' ">
	           and user_id = #{user_id}
	        </if>
	    </where>
	</delete>
	
	<!-- 当前批量删除 -->
	<delete id="deleteBatch" parameterType="java.util.Map">
	   delete from yw_system_usercenter.yw_user
	   <include refid="whereBatchSql"/>
	</delete>
	
</mapper>